<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Page</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <header class="navbar">
        <span style="font-size:30px;cursor:pointer" onclick="openSidePanel()">&#9776;</span>
        <div class="banner-section">
            <span class="retro-font">Retro Ideal</span>
        </div>
        <p class="cursive-font">{{ first_name }} {{ last_name }}</p>
    </header>
    <div class="side-panel" id="sidePanel">
        <a href="javascript:void(0)" class="close-btn" onclick="closeSidePanel()">&times;</a>
        <h1>Vehicles</h1>
        {% for vehicle in vehicles %}
            <a href="#" onclick="loadVehicleDetails({{ loop.index }})">{{ vehicle.reg }}</a>
        {% endfor %}
    </div>
    <div class="content">
        <h2>Selected Vehicle Details</h2>
        <div id="vehicleDetails">
            <!-- Details for the selected vehicle will be populated here -->
        </div>
    </div>
    <div class="footer">
        &copy; 2023 Your Company
    </div>

    <!-- Script to handle side panel open/close -->
    <script>
        const vehicles = {{ vehicles | tojson | safe }};
        function openSidePanel() {
            document.getElementById("sidePanel").style.width = "200px"; // Adjust the width as needed
        }

        function closeSidePanel() {
            document.getElementById("sidePanel").style.width = "0";
        }

        console.log('Vehicles:', vehicles); // Output the vehicles array to the console for debugging
    
        function loadVehicleDetails(index) {
            const selectedVehicle = vehicles[index - 1];
            const detailsContainer = document.getElementById('vehicleDetails');
            const detailsHTML = `
                <h2>Details for ${selectedVehicle.reg}</h2>
                <p>VIN: ${selectedVehicle.vin}</p>
                <p>Make: ${selectedVehicle.make}</p>
                <p>Model: ${selectedVehicle.model}</p>
                <!-- Add more details as needed -->
            `;
            detailsContainer.innerHTML = detailsHTML;
        }
        function logout() {
            // Implement your logout functionality here
            console.log('Logout clicked');
        }

        console.log('Vehicles:', vehicles); // Output the vehicles array to the console for debugging
    
    </script>
</body>
</html>
